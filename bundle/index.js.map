{"version":3,"sources":["webpack:///webpack/bootstrap 3ac7dea62d85ea1ab267","webpack:///./js/index.js","webpack:///./js/functions.js","webpack:///./js/vendors.js"],"names":["then","input","module","exports","openMic","Promise","resolve","reject","Error","navigator","getUserMedia","video","audio","stream","console","log","audioContext","AudioContext","createMediaStreamSource","e","startMicLevelDetection","source","callback","analyser","context","createAnalyser","fftSize","smoothingTimeConstant","connect","buf","Uint8Array","onTimer","getByteFrequencyData","bufSum","reduce","sum","value","level","Math","floor","length","setInterval","getTime","Date","startLimitTimer","limitTimeInMSec","options","limitCallback","limit","progressCallback","progress","percent","timeFromStart","timeAtPrevFrame","updateFrame","now","stop","timerID","clearInterval","window","URL","webkitURL","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","webkitAudioContext"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ac7dea62d85ea1ab267","import {openMic} from './functions'\n\nopenMic().then(input)\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","import './vendors';\n\nmodule.exports = {\n  openMic: function() {\n    return new Promise((resolve, reject) => {\n      reject(new Error('foo'))\n      if (!navigator.getUserMedia) {\n        reject(new Error(\"WebRTC(getUserMedia) is not supported.\"));\n        return;\n      }\n\n      navigator.getUserMedia({\n        video: false,\n        audio: true\n      }, (stream) => {\n        console.log('getUserMedia: ', stream);\n        const audioContext = new AudioContext();\n        const input = audioContext.createMediaStreamSource(stream);\n        resolve(input);\n      }, (e) => {\n        reject(e);\n      });\n    });\n  },\n\n  startMicLevelDetection: function(source, callback) {\n    const analyser = source.context.createAnalyser();\n    analyser.fftSize = 32;\n    analyser.smoothingTimeConstant = 0.3;\n    source.connect(analyser);\n\n    const buf = new Uint8Array(16);\n    const onTimer = () => {\n      analyser.getByteFrequencyData(buf);\n\n      const bufSum = buf.reduce((sum, value) => sum + value);\n      const level = Math.floor(bufSum / buf.length);\n      callback(level);\n    };\n\n    return setInterval(onTimer, 100);\n  },\n\n  getTime: function () {\n    return (new Date().getTime());\n  },\n\n  startLimitTimer: function(limitTimeInMSec, options) {\n    options = options || {};\n    const limitCallback = options.limit || function() {};\n    const progressCallback = options.progress || function(percent) {};\n\n    let timeFromStart = 0;\n    let timeAtPrevFrame = this.getTime();\n\n    const updateFrame = () => {\n      const now = this.getTime();\n      timeFromStart += (now - timeAtPrevFrame);\n      timeAtPrevFrame = now;\n\n      const percent = Math.floor((timeFromStart / limitTimeInMSec) * 100);\n      if (100 <= percent) {\n        stop();\n        progressCallback(100);\n        limitCallback();\n        return;\n      }\n\n      progressCallback(percent);\n    };\n    const timerID = setInterval(updateFrame, 100);\n\n    return () => { clearInterval(timerID); };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/functions.js","window.URL =\n  window.URL ||\n  window.webkitURL;\n\nnavigator.getUserMedia =\n  navigator.getUserMedia ||\n  navigator.webkitGetUserMedia ||\n  navigator.mozGetUserMedia ||\n  navigator.msGetUserMedia;\n\nwindow.AudioContext =\n  window.AudioContext ||\n  window.webkitAudioContext;\n\n\n\n// WEBPACK FOOTER //\n// ./js/vendors.js"],"sourceRoot":""}